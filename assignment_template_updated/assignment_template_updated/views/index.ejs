<!DOCTYPE html>
<html>
  <head>
  
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

  
<script>
var myCart = [];

</script>
    <title>MyApp</title>

  </head>
  <body>

	<!-- Start of first page: #one -->
    <div data-role="page" id="one">

	<div data-role="header">
		<h1>Multi-page</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">   
    
    	<h2>First page</h2>

            This is the first page in the app.
		<h3>Show internal pages:</h3>
		<p><a href="#two" class="ui-btn ui-shadow ui-corner-all">Show page "two"</a></p>
        
         Username: <input type="text" id="usernameLogin" name="username"></input>
         
         Password: <input type="text" id="passwordLogin" name="password"></input>
         <button id ="loginStart" class="ui-btn">Login</button>
  

     
		
	</div><!-- /content -->


	<div data-role="footer" data-theme="a">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page one -->


<!-- Start of second page: #two -->
<div data-role="page" id="manager" data-theme="a">

	<div data-role="header">
		<h1>Manager</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Two</h2>
		<p>I have an id of "two" on my page container. I'm the second page container in this multi-page template.</p>
		<p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>
		<p><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page two -->

<!-- Start of third page: #three -->
<div data-role="page" id="manager" data-theme="a">

	<div data-role="header">
		<h1>Cook</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Three</h2>
		<p>I have an id of "three" on my page container. I'm the third page container in this multi-page template.</p>
		<p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>
		<p><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page three -->

<!-- Start of fourth page: #customer -->
<div data-role="page" id="customer" data-theme="a">
   <div data-role="panel" id="mypanel">

  My Products<!-- panel content goes here -->
  <div id="myitems">
  </div>

</div><!-- /panel -->
	<div data-role="header">
		<h1>Customer</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Four</h2>
		<p>I have an id of "four" on my page container. I'm the fourth page container in this multi-page template.</p>
		<p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>
		
		<div class="ui-field-contain">
    <label for="select-native-2">BBQ Pizza</label>
   
<select id="bbq_pizza_qty" name="select-native-2" id="select-native-2" data-mini="true">
        <option value=""></option>
		<option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
<button id="addtocart" onclick="addToCart('bbq_pizza_qty')"> Add To Cart </button>

</div>

<div class="ui-field-contain">
    <label for="select-native-2">NY Pizza</label>
   
<select id="ny_pizza_qty" name="select-native-2" id="select-native-2" data-mini="true">
        <option value=""></option>
		<option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
<button onclick="addToCart('ny_pizza_qty')"> Add To Cart </button>

</div>

<div class="ui-field-contain">
    <label for="select-native-2">Chicken Fillet Roll</label>
   
<select id="cf_role_qty" name="select-native-2" id="select-native-2" data-mini="true">
        <option value=""></option>
		<option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
<button onclick="addToCart('cf_role_qty')"> Add To Cart </button>

</div>

<div class="ui-field-contain">
    <label for="select-native-2">Potato Wedges</label>
   
<select id="p_wedges_qty" name="select-native-2" id="select-native-2" data-mini="true">
        <option value=""></option>
		<option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
<button onclick="addToCart('p_wedges_qty')"> Add To Cart </button>

</div>

<div class="ui-field-contain">
    <label for="select-native-2">Acai Bowl</label>
   
<select id="a_bowl_qty" name="select-native-2" id="select-native-2" data-mini="true">
        <option value=""></option>
		<option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
<button onclick="addToCart('a_bowl_qty')"> Add To Cart </button>

</div>


		<a href="#mypanel" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-bars">Checkout</a>
		<p><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->
	
	

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page four -->
   
  <script>
  
  $("#loginStart").click(function(e) {
	console.log("clicked");

      var un = $("#usernameLogin").val();
      var pw = $("#passwordLogin").val();
      
      $.post( "/login", { username: un, password: pw })
      .done(function( data ) {
            alert( "Data Loaded: " + data );
			    $('#myitems').html(myCart) // Add the cart to the new panel

              alert(myCart);
           
			// redirection to the customer page.
             if(data.includes("customer")){
			 $.mobile.changePage( "#customer")
            
      
			 }
           // $.mobile.changePage( "#customer", {
            //  transition: "pop",
             // reverse: false,
             // changeHash: false
      });
  
  
  });
  </script>

  </body>
</html>
<script>


function addToCart(itemName){
    // finding out the name of the ITEM we are adding
    var item = itemName;
	console.log(item);
    
    // dynamically find out the qty
	var qty = $('#'+item).children("option:selected").val();
	console.log(qty);
    
    // search the cart and see if we already added
    // the item. If we did, remove the old qty.

    myCart.forEach(function(itemCurrent, index, array) {
           
           
           
           if(itemCurrent.includes(item)){
              console.log("Removing previous reference to " + item);
              myCart.pop(index);
           }
    });
    
    
    // add the item to the cart
    myCart.push(item + '-' + qty);
    $('#myitems').html(myCart);
    alert(myCart);

}

</script>